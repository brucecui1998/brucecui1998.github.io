<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>BruceCui</title><meta name="author" content="BruceCui"><meta name="copyright" content="BruceCui"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="BruceCui">
<meta property="og:url" content="https://brucecui1998.github.io/index.html">
<meta property="og:site_name" content="BruceCui">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:author" content="BruceCui">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://brucecui1998.github.io/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'BruceCui',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2025-05-12 12:27:05'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.1.1"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="../../../../archives/"><div class="headline">Articles</div><div class="length-num">8</div></a><a href="../../../../tags/"><div class="headline">Tags</div><div class="length-num">1</div></a><a href="../../../../categories/"><div class="headline">Categories</div><div class="length-num">1</div></a></div><hr class="custom-hr"/></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header"><nav id="nav"><span id="blog-info"><a href="../../../../index.html" title="BruceCui"><span class="site-name">BruceCui</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">BruceCui</h1></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="2025/05/12/ubuntu24.04%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" title="Untitled">Untitled</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-05-12T04:23:32.352Z" title="Created 2025-05-12 12:23:32">2025-05-12</time></span></div><div class="content">ubuntu界面登录黑屏及卡顿问题背景
在 Ubuntu 24.04 上使用 NVIDIA 驱动 时，遇到了图形卡顿和偶尔登录黑屏的问题。默认情况下，Ubuntu 使用 Wayland，且桌面管理器为 GDM。问题分析
DRM 模式设置缺失：

    初步分析发现，问题并非由 Wayland 与 NVIDIA 驱动的兼容性差 引起。通过撤销禁用 Wayland 的设置后，依然能够正常登录桌面，且没有出现黑屏问题。

启用 nvidia-drm.modeset=1：

    问题的核心原因在于 NVIDIA 驱动 与 DRM 模式设置 的配合。启用 nvidia-drm.modeset=1 内核参数后，问题明显得到解决。登录成功且性能不再卡顿。

解决步骤
启用 nvidia-drm.modeset=1：

    编辑文件 /etc/default/grub，在 GRUB_CMDLINE_LINUX_DEFAULT 中添加 nvidia-drm.modeset=1：

GRUB_CMDLINE_LINUX_DEFAULT&#x3D;”quiet splash nvidia-drm. ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="2025/04/02/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" title="Untitled">Untitled</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-04-02T03:58:48.843Z" title="Created 2025-04-02 11:58:48">2025-04-02</time></span></div><div class="content">frp搭建内网穿透阿里云服务器（公网ip）内网服务器
阿里云服务器配置（服务端）随便选择centos7.6镜像，阿里云服务器防火墙还要额外在网页”防火墙“里设置一下
frps.toml
12345[common]bind_port = 7000token = Admind1o2g3!@#proxy_protocol_version = v2allow_proxy_protocol = true

命令
12345678910111213141516171819202122232425262728293031323334353637383940414243sudo apt install openssh-server    4  sudo yum install openssh-server    5  sudo systemctl status ssh    6  sudo systemctl enable ssh    7  sudo systemctl start ssh    8  sudo yum install ufw    9  systemctl list-unit-fi ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="2025/03/27/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/" title="Untitled">Untitled</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-03-27T07:13:07.342Z" title="Created 2025-03-27 15:13:07">2025-03-27</time></span></div><div class="content">要在 Linux 上设置定时任务来每天自动执行 sudo systemctl restart cpolar 命令，可以通过 cron 来实现。因为 systemctl 命令需要 sudo 权限，所以你需要确保 cron 可以在无需手动输入密码的情况下执行此命令。步骤：
编辑 sudoers 文件以免输入密码： 你需要允许 cron 以无密码的方式执行 systemctl 命令。使用以下命令编辑 sudoers 文件：

sudo visudo
在文件中添加如下行（假设用户是 your_username）：
your_username ALL&#x3D;(ALL) NOPASSWD: &#x2F;bin&#x2F;systemctl restart cpolar
这行配置允许 your_username 用户在执行 systemctl restart cpolar 时不需要输入密码。
创建 cron 任务： 使用 crontab 命令设置定时任务：
crontab -e
在打开的文件中，添加如下行来每天执行 systemctl restart cpolar 命令：
0 0 * * * s ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="2025/03/27/ubuntu16.04%E5%AE%89%E8%A3%85caffe/" title="Untitled">Untitled</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-03-27T07:13:07.338Z" title="Created 2025-03-27 15:13:07">2025-03-27</time></span></div><div class="content">ubuntu16.04下配置caffe资源地址cudatoolkit:https://developer.nvidia.com/cuda-toolkit-archive
NVIDIA Driver:https://www.nvidia.cn/drivers/lookup/
cudnn： https://developer.nvidia.cn/rdp/cudnn-archive
anaconda3： https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/
caffe：https://github.com/BVLC/caffe
Sketch-Recognizer: https://github.com/ajwadjaved/Sketch-Recognizer
本机配置
显卡： GTX 750Ti
配置ssh1. 安装 OpenSSH 服务器使用 apt 包管理器来安装 OpenSSH 服务器：
sudo apt updatesudo apt install openssh-server
安装完成后，OpenSSH 服务会自动启动并设置为 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="2025/03/27/%E6%8F%90%E9%AB%98ssh%E5%AE%89%E5%85%A8/" title="Untitled">Untitled</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-03-27T07:13:07.334Z" title="Created 2025-03-27 15:13:07">2025-03-27</time></span></div><div class="content">配置&#x2F;etc&#x2F;ssh&#x2F;sshd_config123PermitRootLogin no  # 禁用 root 登录PubkeyAuthentication yes  # 只允许 SSH 密钥认证PasswordAuthentication no  # 禁用密码登录

配置&#x2F;etc&#x2F;hosts.deny禁止所有用户访问
1sshd: ALL

配置&#x2F;etc&#x2F;hosts.allow允许这些ip访问
1sshd: 192.168.1.0/24, 127.0.0.1

使用密钥登录，而不是密码在本地电脑上运行
1ssh-keygen -t rsa -b 4096 -C &quot;your_email@example.com&quot;

生成成功后，你会在 .ssh 目录下得到两个文件：
id_rsa（私钥，不要泄露）
id_rsa.pub（公钥，需要复制到服务器）

然后将公钥上传（粘贴）到服务器的~&#x2F;.ssh&#x2F;authorized_keys：
123echo &quot;ssh-rsa xxxxxx ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="2024/04/04/%E6%88%91%E7%9A%84debian11-9%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/" title="我的debian服务器运维笔记">我的debian服务器运维笔记</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-04-04T12:00:00.000Z" title="Created 2024-04-04 20:00:00">2024-04-04</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E7%BB%B4/">服务器运维</a></span></div><div class="content">[toc]
我的debian11.9服务器运维笔记组里购置了2台服务器，操作系统选择11.9 硬件配置如下：

安装过程中遇到的问题对服务器任何需要sudo权限的地方的更改都要小心，建议从安装服务器开始，做过的所有配置的改变全部记录下来！！！
安装grub后无法引导进入bios设置，更改启动顺序
缺失非自由固件去debian官网下载对应版本的firmware.zip然后复制到U盘中插入即可。
DHCP自动配置失败配置网络由于买的服务器没有无线网卡，事实上网线最稳定，所以在debian11.9安装界面配置DHCP的时候会失败，没关系，只要保证把网线插对口（这个问题很细节，排查了两个小时才发现是网线插错口了，主机上总共2个接口，具体情况因人而异，在安装debian时会设置其中一个网络接口，插对就行。），路由器插好，记得设置路由器关闭双WAN口，不然就只有两个口管用
找台同一局域网的电脑：在ipconfig的输出中查找“默认网关”项。
选择一个ip地址，比如我选择192.168.1.120准备分配给debian服务器，检查IP地址冲突，ping这个地址，如果没有回应就说明能用

配置网络，v ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="2024/04/04/%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91cp2k2024/" title="源码编译cp2k 2024">源码编译cp2k 2024</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-04-04T12:00:00.000Z" title="Created 2024-04-04 20:00:00">2024-04-04</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E7%BB%B4/">服务器运维</a></span></div><div class="content">[toc]
源码编译cp2k 20241 获取代码123git clone --recursive https://github.com/cp2k/cp2k.git cp2kcd cp2kgit checkout v2024.1

2 安装依赖1sudo apt install openmpi-bin libopenmpi-dev gfortran gcc g++



12cd tools/toolchain/./install_cp2k_toolchain.sh  --with-gcc=system --with-openblas=system --with-cmake=system  --with-openmpi=system  --with-elpa=no --with-scalapack=install --with-cmake=install

</div></div></div><div class="recent-post-item"><div class="recent-post-info"><a class="article-title" href="2024/04/04/hello-world/" title="Hello World">Hello World</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-04-04T05:57:53.677Z" title="Created 2024-04-04 13:57:53">2024-04-04</time></span></div><div class="content">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.
Quick StartCreate a new post1$ hexo new &quot;My New Post&quot;

More info: Writing
Run server1$ hexo server

More info: Server
Generate static files1$ hexo generate

More info: Generating
Deploy to remote sites1$ hexo deploy

More info: Deployment
</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='../../../../img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">BruceCui</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="../../../../archives/"><div class="headline">Articles</div><div class="length-num">8</div></a><a href="../../../../tags/"><div class="headline">Tags</div><div class="length-num">1</div></a><a href="../../../../categories/"><div class="headline">Categories</div><div class="length-num">1</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="" title="Untitled">Untitled</a><time datetime="2025-05-12T04:23:32.352Z" title="Created 2025-05-12 12:23:32">2025-05-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="../../../04/02/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" title="Untitled">Untitled</a><time datetime="2025-04-02T03:58:48.843Z" title="Created 2025-04-02 11:58:48">2025-04-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="../../../03/27/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/" title="Untitled">Untitled</a><time datetime="2025-03-27T07:13:07.342Z" title="Created 2025-03-27 15:13:07">2025-03-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="../../../03/27/ubuntu16.04%E5%AE%89%E8%A3%85caffe/" title="Untitled">Untitled</a><time datetime="2025-03-27T07:13:07.338Z" title="Created 2025-03-27 15:13:07">2025-03-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="../../../03/27/%E6%8F%90%E9%AB%98ssh%E5%AE%89%E5%85%A8/" title="Untitled">Untitled</a><time datetime="2025-03-27T07:13:07.334Z" title="Created 2025-03-27 15:13:07">2025-03-27</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href=""><span class="card-category-list-name">服务器运维</span><span class="card-category-list-count">2</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="../../tags/Linux/" style="font-size: 1.1em; color: #999">Linux</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="../../archives/2025/05/"><span class="card-archive-list-date">May 2025</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="../../archives/2025/04/"><span class="card-archive-list-date">April 2025</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="../../archives/2025/03/"><span class="card-archive-list-date">March 2025</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="../../archives/2024/04/"><span class="card-archive-list-date">April 2024</span><span class="card-archive-list-count">3</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">8</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Last Update :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-05-12T04:27:05.573Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By BruceCui</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="js/utils.js?v=4.13.0"></script><script src="js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>